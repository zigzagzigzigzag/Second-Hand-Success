@{
    ViewBag.Title = "SearchResults";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row align-items-center">
    <h2 class="h2 col-md-5" style="min-width: 700px">Search Results for @ViewBag.searchText</h2>
    <div class="col-md-5">
        <a class="col-md-1 btn btn-light " href=@Url.Action(controllerName: "Home", actionName: "UserHomePage", routeValues: 0) style="min-width:200px">Back to Home Page</a>
    </div>
</div>

<div class="row" style="margin:20px">
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Users')">Users</button>
        <button class="tablinks" onclick="openTab(event, 'Listings')">Listings</button>
        <button class="tablinks" onclick="openTab(event, 'Modules')">Modules</button>
    </div>
</div>

<div class="row" style="margin:20px">
    <!-- Tab content -->
    <div id="Users" class="tabcontent">
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col" style="border-top:none;">Name</th>
                    <th scope="col" style="border-top:none;">Surname</th>
                    <th scope="col" style="border-top:none;">Email Address</th>
                    <th scope="col" style="border-top:none;">Rating</th>
                    <th scope="col" style="border-top:none"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.people)
                {
                <tr>
                    <td>
                        @item.PersonName
                    </td>
                    <td>
                        @item.PersonSurname
                    </td>
                    <td>
                        @item.PersonEmail
                    </td>
                    <td>
                        @item.PersonRating
                    </td>
                    <td>
                        <a class="col-md-12 btn btn-light justify-content-end m-auto" style="margin-right:0px"
                           @*href=@Url.Action(controllerName: "Home",actionName: "EditListing",routeValues: 0})*@>Report User</a>
                    </td>
                    <td>
                        <a class="col-md-12 btn btn-light justify-content-end m-auto" style="margin-right:0px"
                           @*href=@Url.Action(controllerName: "Home",actionName: "EditListing",routeValues: 0})*@>Rate User</a>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>

    <div id="Listings" class="tabcontent">
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col" style="border-top:none;">Book Name</th>
                    <th scope="col" style="border-top:none;">Seller Name</th>
                    <th scope="col" style="border-top:none;">Seller Email Address</th>
                    <th scope="col" style="border-top:none;">Book Condition</th>
                    <th scope="col" style="border-top:none;">Listing Date</th>
                    <th scope="col" style="border-top:none;">Listing Price</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.listings)
                {
                    <tr>
                        <td>
                            @item.BOOK.bookName
                        </td>
                        <td>
                            @item.PERSON.PersonName  @item.PERSON.PersonSurname
                        </td>
                        <td>
                            @item.PERSON.PersonEmail
                        </td>
                        <td>
                            @item.listingCondition
                        </td>
                        <td>
                            @item.listingDate.ToString("dd MMMM yyyy")
                        </td>
                        <td>
                            @item.listingPrice
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div id="Modules" class="tabcontent">
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col" style="border-top:none;">ModuleCode</th>
                    <th scope="col" style="border-top:none;">TextBook Name</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.modules)
                {
                    <tr>
                        <td>
                            @item.moduleCode
                        </td>
                        <td>
                            @item.BOOK.bookName
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<style>
    .h1 {
        font-size: 4.5rem
    }

    .h2 {
        font-size: 3.5rem;
        color: white
    }

    .btn {
        max-height: 40px;
    }

    table {
        border-radius: 10px;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons that are used to open the tab content */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border-top: none;
        min-width: inherit;
    }
</style>

<script>
    function openTab(evt, type) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(type).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

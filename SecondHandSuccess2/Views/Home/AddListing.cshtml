@model SecondHandSuccess2.Models.Listing
@{ var book = ViewBag.books as SecondHandSuccess2.Models.BOOK;}
@{
    var existence = "The ISBN exists";
}
@{ string existingListingString = "User can only post one copy of a book";}
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Scripts/jquery.validate.min.js")
@Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")

<div id="addListing">
    @{
        ViewBag.Title = "Add Listing";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }


    <div class="container">
        <div class="row">
            <h1 class="h1 col-md-6" id="addModuleTitle">Add a Listing</h1>
        </div>
        <div class="row" style="margin:20px">
            <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                <div class="card card-signin my-5">
                    <div class="card-body text-center" id="addListingContainer1">
                        <h5 class="card-title text-center" id="listingInformation1">Listing Information</h5>
                        <p id="existingListing">@existingListingString</p>
                        @using (Html.BeginForm("confirmNewListing", "Home", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <table class="table table-dark" id="tableListing1">
                                <tbody>
                                    <tr>
                                        <td>
                                            Book Name
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center" id="rowBookName">
                                                @Html.DropDownList("bookISBN", new SelectList(ViewBag.books, "bookISBN", "bookName", new { @class = "form-control" }))
                                                @Html.ValidationMessageFor(model => model.bookISBN)

                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Price R
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center">
                                                @Html.TextBoxFor(model => model.listingPrice, new { @class = "form-control", @type = "number", @style = "margin:auto" })
                                                @Html.ValidationMessageFor(model => model.listingPrice)
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Quality
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center">
                                                @Html.DropDownList("conditions")                                              
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <button class="btn btn-lg btn-primary btn-block text-uppercase" type="submit" id="submitExisting">Confirm</button>

                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="margin:20px">
            <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                <div class="card card-signin my-5">
                    <div class="card-body text-center" id="addListingContainer2">
                        <h5 class="card-title text-center" id="listingInformation2">Add a new textbook</h5>

                        @using (Html.BeginForm("createNewBook", "User", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <table class="table table-dark" id="tableListing2">
                                <tbody>
                                    <tr>
                                        <td>
                                            ISBN
                                        </td>
                                        <td id="rowOne">
                                            <div class="form-label-group text-center">
                                                @Html.TextBoxFor(model => book.bookISBN, new { @class = "form-control", @style = "margin:auto" })
                                                @Html.ValidationMessageFor(model => book.bookISBN, "", new { @class = "text-danger" })
                                            </div>
                                            <p id="existenceString">@existence</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Name
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(model => book.bookName, new { @class = "form-control", @style = "margin:auto" })
                                            @Html.ValidationMessageFor(model => book.bookName, "", new { @class = "text-danger" })
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Publisher
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center">
                                                @Html.TextBoxFor(model => book.bookPublisher, new { @class = "form-control", @style = "margin:auto" })
                                                @Html.ValidationMessageFor(model => book.bookPublisher, "", new { @class = "text-danger" })

                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Author
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center">
                                                @Html.TextBoxFor(model => book.bookAuthor, new { @class = "form-control", @style = "margin:auto" })
                                                @Html.ValidationMessageFor(model => book.bookAuthor, "", new { @class = "text-danger" })

                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            Edition
                                        </td>
                                        <td>
                                            <div class="form-label-group text-center">
                                                @Html.TextBoxFor(model => book.bookEdition, new { @class = "form-control", @type = "number", @style = "margin:auto" })
                                                @Html.ValidationMessageFor(model => book.bookEdition, "", new { @class = "text-danger" })

                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td colspan="2" >
                                            <button class="btn btn-lg btn-primary btn-block text-uppercase" type="submit" name="pageDirect" value="Listing" id="submitButtonNewBook">Add</button>
                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                                                    }
                        <p id="confirmation"></p>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <style>
        .form-control {
            border-color: #d4d4d4 !important;
            background-color: rgb(243, 243, 243);
        }

        .form-label-group {
            position: relative;
            margin-bottom: 1rem;
        }

        .btn {
            max-width: 280px;
            margin: auto;
        }
    </style>



</div>

<script>
    $(document).ready(function () {
        $("#existenceString").hide("slow");
    });
    $(document).ready(function () {
        $("#existingListing").hide("slow");
    });
    $("#submitButtonNewBook").click(function () { ($("#existenceString").show("slow")).fadeIn(2000); });
    $("#submitExisting").click(function () { ($("#existingListing").show("slow")).fadeIn(2000); });
    $("#rowOne").click(function () { ($("#existenceString").hide("slow")); });
    $("#rowBookName").click(function () { ($("#existingListing").hide("slow")); });
</script>
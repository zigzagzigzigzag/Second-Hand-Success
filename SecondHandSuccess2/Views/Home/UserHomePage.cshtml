@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row align-items-center">
    <h1 class="h1 col-md-5">My Listings</h1>
    <div class="col-md-7 row align-items-center" style="margin:auto">
        <table class="table table-borderless"  style="margin:auto">
            <tr>
                <td>
                    @using (Html.BeginForm("addListing", "Home", FormMethod.Post, new { @class = "col-md-3 text-center", role = "form", @style = "max-width:150px" }))
                    {
                        <button class="btn btn-light" type="submit" id="addListItem" style="margin:auto">Add Listing</button>
                    }
                </td>
                <td>
                    <a class="col-md-2 btn btn-light " href=@Url.Action(controllerName: "Home", actionName: "Index", routeValues: 0) style="max-width:150px">Log Out</a>
                </td>
                <td>
                    @using (Html.BeginForm("filterSearch", "Home", FormMethod.Post, new { @class = "col-md-7 text-center row", role = "form" }))
                    {
                        @Html.TextBox("searchCriteria", null, new { placeholder = "Search", @class = "form-control", @style = "margin: auto" });
                        <button type="submit" id="btnSubmit" name="Search" class="btn btn-light col-md-3" style="margin:auto">Search</button>
                    }
                </td>
            </tr>
            <tr>
                <td>
                   
                </td>
                <td>
                   
                </td>
                <td>
                    <label style="color: white">Search for a User by Name, a Textbook by Name, or a Module by Module Code</label>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="row" style="margin:20px">
    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col" style="border-top:none;">Textbook Name</th>
                <th scope="col" style="border-top:none;">Condition</th>
                <th scope="col" style="border-top:none;">Date posted</th>
                <th scope="col" style="border-top:none;">Price</th>
                <th scope="col" style="border-top:none"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in ViewBag.Listings)
            {
                if (@item.personIDNumber == ViewBag.User.PersonIDNumber)
                {
                    <tr>
                        <td>
                            @item.BOOK.bookName
                        </td>
                        <td>
                            @item.listingCondition
                        </td>
                        <td>
                            @item.listingDate.ToString("dd MMMM yyyy")
                        </td>
                        <td>
                            R@(decimal.Parse(@item.listingPrice)).00
                        </td>
                        <td>
                            <a class="col-md-12 btn btn-light justify-content-end m-auto" style="margin-right:0px"
                               href=@Url.Action(
                                controllerName: "Home",
                                actionName: "EditListing",
                                routeValues: new { id = @item.BOOK.bookISBN })>Edit</a>
                        </td>
                        <td>
                            <a class="col-md-12 btn btn-light justify-content-end m-auto" style="margin-right:0px"
                               href=@Url.Action(
                                controllerName: "Home",
                                actionName: "deleteListing",
                                routeValues: new { id = @item.BOOK.bookISBN })>Delete</a>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
<style>
    .h1 {
        font-size: 4.5rem
    }

    .btn {
        max-height: 40px;
    }

    table {
        border-radius: 10px;
    }
</style>
